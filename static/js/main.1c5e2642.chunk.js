(this["webpackJsonpsber-test-task"]=this["webpackJsonpsber-test-task"]||[]).push([[0],{25:function(t,e,n){},26:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var r,a=n(0),l=n.n(a),o=n(18),i=n.n(o),c=(n(25),n(5)),s=n(4),u=n(2),f=(n(26),["title","titleId"]);function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function p(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},l=Object.keys(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function b(t,e){var n=t.title,l=t.titleId,o=p(t,f);return a.createElement("svg",d({id:"edit",fill:"#2196f3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"40px",height:"40px",ref:e,"aria-labelledby":l},o),n?a.createElement("title",{id:l},n):null,r||(r=a.createElement("path",{d:"M 16.9375 1.0625 L 3.875 14.125 L 1.0742188 22.925781 L 9.875 20.125 L 22.9375 7.0625 C 22.9375 7.0625 22.8375 4.9615 20.9375 3.0625 C 19.0375 1.1625 16.9375 1.0625 16.9375 1.0625 z M 17.3125 2.6875 C 18.3845 2.8915 19.237984 3.3456094 19.896484 4.0214844 C 20.554984 4.6973594 21.0185 5.595 21.3125 6.6875 L 19.5 8.5 L 15.5 4.5 L 16.9375 3.0625 L 17.3125 2.6875 z M 4.9785156 15.126953 C 4.990338 15.129931 6.1809555 15.430955 7.375 16.625 C 8.675 17.825 8.875 18.925781 8.875 18.925781 L 8.9179688 18.976562 L 5.3691406 20.119141 L 3.8730469 18.623047 L 4.9785156 15.126953 z"})))}var O,j=a.forwardRef(b),v=(n.p,["title","titleId"]);function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function y(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},l=Object.keys(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function m(t,e){var n=t.title,r=t.titleId,l=y(t,v);return a.createElement("svg",h({id:"checkmark",fill:"#2196f3",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":r},l),n?a.createElement("title",{id:r},n):null,O||(O=a.createElement("g",null,a.createElement("path",{d:"m9.707 19.121c-.187.188-.442.293-.707.293s-.52-.105-.707-.293l-5.646-5.647c-.586-.586-.586-1.536 0-2.121l.707-.707c.586-.586 1.535-.586 2.121 0l3.525 3.525 9.525-9.525c.586-.586 1.536-.586 2.121 0l.707.707c.586.586.586 1.536 0 2.121z"}))))}var g,x,E=a.forwardRef(m),w=(n.p,["title","titleId"]);function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function L(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},l=Object.keys(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function I(t,e){var n=t.title,r=t.titleId,l=L(t,w);return a.createElement("svg",S({height:"51pt",id:"add",viewBox:"0 0 511 511",width:"51pt",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":r},l),n?a.createElement("title",{id:r},n):null,g||(g=a.createElement("path",{d:"m256 0c-141.164062 0-256 114.835938-256 256s114.835938 256 256 256 256-114.835938 256-256-114.835938-256-256-256zm0 0",fill:"#2196f3"})),x||(x=a.createElement("path",{d:"m368 277.332031h-90.667969v90.667969c0 11.777344-9.554687 21.332031-21.332031 21.332031s-21.332031-9.554687-21.332031-21.332031v-90.667969h-90.667969c-11.777344 0-21.332031-9.554687-21.332031-21.332031s9.554687-21.332031 21.332031-21.332031h90.667969v-90.667969c0-11.777344 9.554687-21.332031 21.332031-21.332031s21.332031 9.554687 21.332031 21.332031v90.667969h90.667969c11.777344 0 21.332031 9.554687 21.332031 21.332031s-9.554687 21.332031-21.332031 21.332031zm0 0",fill:"#fafafa"})))}var C,N=a.forwardRef(I),k=(n.p,["title","titleId"]);function M(){return(M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function D(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},l=Object.keys(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)n=l[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function P(t,e){var n=t.title,r=t.titleId,l=D(t,k);return a.createElement("svg",M({id:"delete",fill:"#2196f3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",width:"40px",height:"40px",ref:e,"aria-labelledby":r},l),n?a.createElement("title",{id:r},n):null,C||(C=a.createElement("path",{d:"M 21.734375 19.640625 L 19.636719 21.734375 C 19.253906 22.121094 18.628906 22.121094 18.242188 21.734375 L 13 16.496094 L 7.761719 21.734375 C 7.375 22.121094 6.746094 22.121094 6.363281 21.734375 L 4.265625 19.640625 C 3.878906 19.253906 3.878906 18.628906 4.265625 18.242188 L 9.503906 13 L 4.265625 7.761719 C 3.882813 7.371094 3.882813 6.742188 4.265625 6.363281 L 6.363281 4.265625 C 6.746094 3.878906 7.375 3.878906 7.761719 4.265625 L 13 9.507813 L 18.242188 4.265625 C 18.628906 3.878906 19.257813 3.878906 19.636719 4.265625 L 21.734375 6.359375 C 22.121094 6.746094 22.121094 7.375 21.738281 7.761719 L 16.496094 13 L 21.734375 18.242188 C 22.121094 18.628906 22.121094 19.253906 21.734375 19.640625 Z"})))}var T=a.forwardRef(P),z=(n.p,n(19)),X=n.n(z),Y=n(20),B=n.n(Y),A=n(50),R=n(9),F=n.n(R),G=n(49),H=n(1);function U(t){var e=t.setNote,n=t.text,r=t.id,l=t.dispatch,o=t.position;function i(t){var n,r=t.target,a=null===r||void 0===r||null===(n=r.parentElement)||void 0===n?void 0:n.getBoundingClientRect();e((function(e){return Object(u.a)(Object(u.a)({},e),{},{target:t.target,parentElement:null===r||void 0===r?void 0:r.parentElement,right:a.right,bottom:a.bottom})}))}var c=Object(a.useState)(!1),f=Object(s.a)(c,2),d=f[0],p=f[1],b=Object(a.useState)(""),O=Object(s.a)(b,2),v=O[0],h=O[1];return Object(H.jsxs)("div",{style:{top:null===o||void 0===o?void 0:o.top,left:null===o||void 0===o?void 0:o.left},onMouseUp:function(t){var e,n,a=t.target;"note"===a.className&&l({type:"SET POSITION",payload:{id:r,top:null===a||void 0===a||null===(e=a.style)||void 0===e?void 0:e.top,left:null===a||void 0===a||null===(n=a.style)||void 0===n?void 0:n.left}})},onMouseDown:function(t){var n=t.target;e((function(e){return Object(u.a)(Object(u.a)({},e),{},{isNote:!0,distX:Math.abs(n.offsetLeft-t.clientX),distY:Math.abs(n.offsetTop-t.clientY)})}))},className:"note",children:[Object(H.jsx)("div",{onMouseDown:function(t){e((function(t){return Object(u.a)(Object(u.a)({},t),{},{focus:"a"})})),i(t)},className:"a"}),Object(H.jsx)("div",{onMouseDown:function(t){e((function(t){return Object(u.a)(Object(u.a)({},t),{},{focus:"b"})})),i(t)},className:"b"}),Object(H.jsx)("div",{onMouseDown:function(t){e((function(t){return Object(u.a)(Object(u.a)({},t),{},{focus:"c"})})),i(t)},className:"c"}),Object(H.jsx)("div",{onMouseDown:function(t){e((function(t){return Object(u.a)(Object(u.a)({},t),{},{focus:"d"})})),i(t)},className:"d"}),Object(H.jsx)(E,{style:{display:d?"block":"none"},onClick:function(t){var e,n;p(!1);var a=B.a.sanitize(v,{USE_PROFILES:{html:!1,svg:!1,mathMl:!1}});l({type:"CHANGE",payload:{id:r,text:a}}),h(a);var o=t.target,i=null===o||void 0===o?void 0:o.closest(".note");l({type:"SET POSITION",payload:{id:r,top:null===i||void 0===i||null===(e=i.style)||void 0===e?void 0:e.top,left:null===i||void 0===i||null===(n=i.style)||void 0===n?void 0:n.left}})}}),Object(H.jsx)(j,{style:{display:d?"none":"block"},onClick:function(){h(n),p(!0)}}),Object(H.jsx)(T,{onClick:function(){return l({type:"DELETE",payload:r})}}),Object(H.jsx)("textarea",{style:{display:d?"block":"none"},className:"text-area",value:v,onChange:function(t){return h(t.target.value)},placeholder:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043a\u0441\u0442"}),Object(H.jsx)("span",{onMouseDown:function(t){return t.preventDefault()},style:{display:d?"none":"block"},className:"note-text",dangerouslySetInnerHTML:{__html:X()(null!==n&&void 0!==n?n:"")}})]})}var _=function(){var t=[{id:1,text:"",position:{}}],e=function(){var e=Object(A.a)("notesStorage",t),n=Object(s.a)(e,2),r=n[0],l=n[1],o=Object(a.useCallback)((function(t,e){var n=function(t,e){switch(e.type){case"ADD":return[].concat(Object(c.a)(t),[{id:Object(G.a)(),text:""}]);case"CHANGE":return[].concat(Object(c.a)(t.filter((function(t){return t.id!==e.payload.id}))),[{id:e.payload.id,text:e.payload.text}]);case"DELETE":return Object(c.a)(t.filter((function(t){return t.id!==e.payload})));case"SET POSITION":return[].concat(Object(c.a)(t.filter((function(t){return t.id!==e.payload.id}))),[{id:e.payload.id,position:e.payload,text:t.find((function(t){return t.id===e.payload.id})).text}]);case"GET SESSION":return Object(c.a)(e.payload);default:return t}}(t,e);return l(n),n}),[l]);return Object(a.useReducer)(o,r)}(),n=Object(s.a)(e,2),r=n[0],l=n[1],o=Object(a.useState)({target:null,focus:"",distX:null,distY:null,isNote:!1,right:null,bottom:null,parentElement:null}),i=Object(s.a)(o,2),f=i[0],d=i[1];function p(t){f.right-t.clientX>=100&&(f.parentElement.style.left=t.clientX+"px",f.parentElement.style.width=f.right-f.parentElement.offsetLeft+"px")}function b(t){f.bottom-t.clientY>=100&&(f.parentElement.style.top=t.clientY+"px"),f.parentElement.style.height=f.bottom-f.parentElement.offsetTop+"px"}function O(t){t.clientX-f.parentElement.offsetLeft>=100&&(f.parentElement.style.width=t.clientX-f.parentElement.offsetLeft+"px")}function j(t){t.clientY-f.parentElement.offsetTop>=100&&(f.parentElement.style.height=t.clientY-f.parentElement.offsetTop+"px")}var v=Object(a.useState)(""),h=Object(s.a)(v,2),y=h[0],m=h[1],g=Object(a.useState)(""),x=Object(s.a)(g,2),E=x[0],w=x[1],S=Object(a.useState)(""),L=Object(s.a)(S,2),I=L[0],C=L[1];return Object(H.jsx)("div",{className:"App",children:Object(H.jsxs)("div",{style:{height:"100vh",width:"100vw"},onMouseDown:function(t){var e;Array.from(document.querySelectorAll(".note")).forEach((function(t){t.style.zIndex="0"}));var n=t.target;"note"===n.className?n.style.zIndex="1000":"note"===(null===(e=n.parentElement)||void 0===e?void 0:e.className)&&(n.parentElement.style.zIndex="1000")},onMouseMove:function(t){if(t.preventDefault(),f.parentElement)switch(f.focus){case"a":b(t),p(t);break;case"b":b(t),O(t);break;case"c":j(t),p(t);break;case"d":j(t),O(t)}else d((function(e){return Object(u.a)(Object(u.a)({},e),{},{target:t.target})})),f.isNote&&(f.target.style.left="".concat(t.clientX-f.distX,"px"),f.target.style.top="".concat(t.clientY-f.distY,"px"))},onMouseUp:function(){d((function(t){return Object(u.a)(Object(u.a)({},t),{},{isNote:!1,parentElement:null})}))},children:[Object(H.jsx)(N,{onClick:function(){return l({type:"ADD"})}}),r.map((function(t){return Object(H.jsx)(U,{id:t.id,dispatch:l,position:t.position,text:t.text,setNote:d},t.id)})),Object(H.jsxs)("div",{className:"save-session",children:[Object(H.jsx)("span",{style:{color:"red"},children:I}),Object(H.jsx)("h1",{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0435\u0441\u0441\u0438\u044e"}),Object(H.jsxs)("form",{onSubmit:function(t){t.preventDefault(),F.a.post("",{data:{snameInput:y,state:r}}).then((function(t){return C(t.data)})).catch((function(t){return C(t.message)})),m("")},children:[Object(H.jsx)("input",{value:y,onChange:function(t){return m(t.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0438\u043c\u044f",type:"text"}),Object(H.jsx)("button",{type:"submit",children:"OK"})]}),Object(H.jsxs)("div",{className:"restore-session",children:[Object(H.jsx)("h1",{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0435\u0441\u0441\u0438\u044e"}),Object(H.jsxs)("form",{onSubmit:function(t){t.preventDefault(),F.a.post("",{data:{rnameInput:E}}).then((function(t){if("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442"!==t.data)return C("O\u043a"),l({type:"GET SESSION",payload:t.data});C(t.data)})).catch((function(t){return C(t.message)})),w("")},children:[Object(H.jsx)("input",{value:E,onChange:function(t){return w(t.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",type:"text"}),Object(H.jsx)("button",{type:"submit",children:"OK"})]})]})]})]})})},J=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,l=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),l(t),o(t)}))};i.a.render(Object(H.jsx)(l.a.StrictMode,{children:Object(H.jsx)(_,{})}),document.getElementById("root")),J()}},[[46,1,2]]]);
//# sourceMappingURL=main.1c5e2642.chunk.js.map